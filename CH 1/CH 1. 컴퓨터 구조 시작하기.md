# CH 1. 컴퓨터 네워크 시작하기

## 1-1 컴퓨터 네트워크를 알아야 하는 이유

### 네트워크의 네트워크, 인터넷

**인터넷**이란 여러 네트워크를 연결한 '네트워크의 네트워크'를 의미한다.

## 1-2 네트워크 거시적으로 살펴보기

### 네트워크의 기본 구조

모든 네트워크는 '노드', 노드를 연결하는 '간선', 노드 간 주고받는 '메시지'로 구성된다.

#### 호스트

네트워크의 가장자리에 위치한 노드는 네트워크를 통해 흐르는 정보를 최초로 생성 및 송신하고, 최종적으로 수신한다. 이러한 가장자리 노드를 네트워크에서는 **호스트**라고 부른다. 호스트는 종단 시스템이라고도 한다. 호스트는 네트워크상에서 특정한 역할을 수행하기도 하는데, 대표적인 역할로는 서버와 클라이언트가 있다.

**서버**는 '어떠한 서비스'를 제공하는 호스트이다. 여기서 '어떠한 서비스'는 파일이 될수도 있고, 웹 페이지, 메일이 될 수도 있다.

**클라이언트**란 서버에게 어떠한 서비스를 요청하고 서버의 응답을 제공받는 호스트이다.

#### 네트워크 장비

네트워크 가장자리에 위치하지 않은 노드, 즉 호스트 간 주고받을 정보가 중간에 거치는 노드도 있다. 이를 중간 노드라고 하는데 이러한 중간 노드들을 **네트워크 장비**라고 한다. 네트워크 장비는 호스트 간 주고받는 정보가 원하는 수신지까지 안정적이고 안전하게 전송될 수 있도록 한다.

#### 통신 매체

그래프는 노드와 이를 연결 짓는 간선으로 이루어지기에, 호스트와 네트워크 장비 또한 유무선 매체를 통해 연결되어 있어야 한다. 이렇게 각 노드를 연결하는 간선이 바로 **통신 매체**이다. 이 통신 매체에는 노드들을 유선으로 연결하는 **유선 매체**, 무선으로 연결하는 **무선 매체**가 있다.

#### 메시지

통신 매체로 연결된 노드가 주고받는 정보를 **메시지**라고 한다. 메시지는 웹 페이지가 될 수도, 파일, 메일이 될 수도 있다. 네트워크는 호스트, 네트워크 장비, 통신 매체, 메시지로 구성된다.

### 범위에 따른 네트워크 분류

#### LAN

**LAN**은 Local Area Network의 약자로 가까운 지역을 연결한 근거리 통신망을 의미한다. 예를 들어 가정, 기업, 학교처럼 한정된 공간에서의 네트워크를 LAN이라고 부른다.

#### WAN

**WAN**은 Wide Area Network의 약자로 먼 지역을 연결하는 광역 통신망을 의미한다. 멀리 떨어진 LAN을 연결할 수 있는 네트워크가 바로 WAN이다. 인터넷이 WAN으로 분류된다. 같은 LAN에 속한 호스트끼리 메시지를 주고받아야 할 때는 인터넷 연결과 같은 WAN이 필요 없지만, 다른 LAN에 속한 호스트와 메시지를 주고받아야 할 때는 WAN이 필요한다.

WAN은 **ISP**(Internet Service Provider)라는 인터넷 서비스 업체가 구축하고 관리한다. ISP는 사용자에게 인터넷과 같은 WAN에 연결 가능한 회선을 임대하는 등 WAN과 관련된 다양한 서비스를 제공한다.

### 메시지 교환 방식에 따른 네트워크 분류

네트워크로 메시지를 주고받는 방식은 대표적으로 회선 교환 방식과 패킷 교환 방식으로 나눌 수 있다. 각 방식을 사용하는 네트워크를 각각 회선 교환 네트워크, 패킷 교환 네트워크라고 한다.

#### 회선 교환 방식

**회션 교환** 방식은 먼저 메시지 전송로인 **회선**을 설정하고 이를 통해 메시지를 주고받는 방식이다. '회선을 설정한다'라는 말은 '두 호스트가 연결되었다'라는 말과 같다. 회선 교환 네트워크에서는 호스트들이 메시지를 주고받기 전에 두 호스트를 연결한 후, 연결된 경로로 메시지를 주고받는다.

회선 교환 방식은 우선 두 호스트 사이에 연결을 확보한 후에 메시지를 주고받는 특성 덕분에 주어진 시간 동안 전송되는 정보의 양이 비교적 일정하다는 장점이 있다.

회선 교환 네트워크가 올바르게 동작하기 위해서는 호스트 간의 회선을 적절하게 설정해야 한다. 이 역할을 수행하는 회선 교환 네트워크 장비로는 **회선 스위치**가 있다. 즉, 회선 스위치는 호스트 사이에 일대일 전송로를 확보하는 네트워크 장비이다.

#### 패킷 교환 방식

**패킷 교환** 방식은 회선 교환 방식의 문제점을 해결한 방식으로, 메시지를 패킷이라는 작은 단위로 쪼개어 전송한다. 여기서 **패킷**은 패킷 교환 네트워크상에서 송수신되는 미시지의 단위이다. 현대 인터넷 대부분 패킷 교환 방식을 이용한다.

패킷 교환 네트워크는 회선 교환 네트워크와는 달리 메시지를 송수신하는 두 호스트가 하나의 전송 경로를 점유하지 않기에 네트워크 이용 효율이 상대적으로 높다.

사전에 설정된 경로만으로 통신하는 회선 교환 방식과는 달리, 패킷 교환 방식은 정해진 경로만으로 메시지를 송수신하지 않는다. 이 과정에서 메시지는 다양한 중간 노드를 거칠 수 있는데, 이때 중간 노드인 **패킷 스위치**는 패킷이 수신지까지 올바르게 도달할 수 있도록 최적의 경로를 결정하거나 패킷의 송수신지를 식별한다. 대표적인 패킷 스위치 네트워크 장비로는 **라우터**와 **스위치**가 있다.

패킷을 통해 전송하고자 하는 데이터를 **페이로드**라고 한다. 페이로드와 더불어 **헤더**라는 정보도 패킷 앞에 포함된다. 때로는 패킷 뒤에 **트레일러**라는 정보가 포함되기도 한다.

헤더와 트레일러는 패킷에 붙는 일종의 부가 정보, 내지는 제어 정보이다. 헤더에 담기는 대표적인 정보로는 주소가 있다. **주소**는 송수신지를 특정하는 정보를 의미한다. 네트워크에 흐르는 수많은 패킷에는 모두 송수신지가 담겨 있다.

이렇게 송수신지를 특정할 수 있는 주소가 있다면 송수신지 유형에 따라 다양한 방식으로 메시지를 보낼 수 있게 된다. 가장 중요한 전송 방식은 유니캐스트와 브로드캐스트이다.

**유니캐스트**는 가장 일반적인 형태의 송수신 방식으로, 하나의 수신지에 메시지를 전송하는 방식이다. 송신지와 수신지가 일대일로 메시지를 주고받는 경우이다.

**브로드캐스트**는 자신을 제외한 네트워크상의 모든 호스트에게 전송하는 방식이다. 브로드캐스트가 전송되는 범위를 **브로드캐스트 도메인**이라고 한다. 즉, 브로드캐스트의 수신지는 브로드캐스트 도메인이며 이는 자신을 제외한 네트워크 상의 모든 호스트이다.

## 1-3 네트워크 미시적으로 살펴보기

### 프로토콜

**프로토콜**은 노드 간에 정보를 올바르게 주고받기 위해 합의된 규칙이나 방법을 의미한다. 즉, 서로 다른 통신 장치들이 정보를 주고받으려면 프로토콜이 통해야 한다.

프로토콜에는 저마다의 **목적**과 **특징**이 있다. 프로토콜의 임무는 정해져 있기에 저마다 목적과 특징이 다양하다. 프로토콜마다 목적과 특징이 다르기에 이에 부합하는 정보도 달라질 수 있으며, 따라서 특정 프로토콜로 주고받는 패킷의 부가 정보도 달라질 수 있다. 즉, 프로토콜마다 패킷의 헤더 내용이 달라질 수 있다.

### 네트워크 참조 모델

네트워크를 통해 정보를 주고받을 때는 정형화된 여러 단게를 거친다. 이 과정은 계층으로 표현할 수 있다. 이렇게 통신이 일어나는 각 과정을 계층으로 나누는 구조를 **네트워크 참조 모델**이라고 한다. 계층으로 표현한다는 점에서 **네트워크 계층 모델**이라 부르기도 한다.

이와 같이 통신 과정을 계층으로 나눈 이유는 크게 두 가지이다.

**첫째, 네트워크 구성과 설계가 용이하다.**
각 계층이 수행해야 할 역할이 정해져 있으므로 계층의 목적에 맞게 프로토콜과 네트워크 장비를 계층별로 구성할 수 있다. 물론 모든 프로토콜이나 네트워크 장비가 참조 모델과 완벽히 들어맞는 것은 아니다. 특히 네트워크 장비는 상위 계층의 장비가 하위 계층의 장비 역할을 포괄해서 수행하는 경우도 많다.

**둘째, 네트워크 문제 진단과 해결이 용이하다.**
통신 과정에서 문제가 발생하더라도 문제의 원인을 계층별로 진단하기 수월하다. 네트워크를 계층별로 진단하면 문제 발생 지점을 추측할 수 있어, 문제 진단과 해결이 수월하다.

#### OSI 모델

**OSI 모델**은 국제 표준화 기구에서 만든 네트워크 참조 모델이다. 통신 단계를 7개의 계층으로 나누는데, 최하위 계층에서 최상위 계층순으로 각각 물리 계층, 데이터 링크 계층, 네트워크 계층, 전송 계층, 세션 계층, 표현 계층, 응용 계층이다.

**1. 물리 계층**

**물리 계층**은 OSI 모델의 최하단에 있는 계층으로, 1과 0으로 표현되는 비트 신호를 주고 받는 계층이다. 가장 근원적인 통신이 이루어지는 계층이라 할 수 있다. 1과 0으로 표현된 비트 데이터는 다양한 통신 매체를 통해 다양한 신호로 운반될 수 있다.

통신 매체에 맞는 신호로 운반되도록 비트 데이터의 변환이 이루어지고 통신 매체를 통한 송수신이 이루어지는 계층이 바로 물리 계층이다.

**2. 데이터 링크 계층**

**데이터 링크 계층**은 네트워크 내 주변 장치 간의 정보를 올바르게 주고받기 위한 계층이다. 여기서는 물리 계층을 통해 주고받는 정보에 오류가 없는지 확인하고, MAC 주소라는 주소 체계를 통해 네트워크 내 송수신지를 특정할 수 있다. 때로는 전송 과정에서 발생할 수 있는 충돌 문제를 해결하는 계층이기도 하다.

**3. 네트워크 계층**

**네트워크 계층**은 메시지를 (다른 네트워크에 속한) 수신지까지 전달하는 계층이다. 네트워크 계층에서는 네트워크 간의 통신이 이루어진다. 예컨대 네트워크 계층은 인터넷을 가능하게 하는 계층이라고 할 수 있다. 네트워크 계층에서는 IP 주소라는 주소 체계를 통해 통신하고자 하는 수신지 호스트와 네트워크를 식별하고, 원하는 수신지에 도달하기 위한 최적의 경로를 결정한다.

**4. 전송 계층**

**전송 계층**은 신뢰성 있고 안정성 있는 전송을 해야 할 때 필요한 계층이다. 전송 계층에서는 패킷의 흐름을 제어하거나 전송 오류를 점검해 신뢰성 있고 안정적인 전송이 이루어지도록 한다. 이 외에도 포트라는 정보를 통해 실행 중인 응용 프로그램의 식별이 이루어지기도 한다.

**5. 세션 계층**
**세션 계층**은 이름 그대로 '세션'을 관리하기 위해 존재하는 계층이다. **세션**은 일반적으로 통신을 주고받는 호스트의 응용 프로그램 간 연결 상태를 의미한다. 세션 계층에서는 이러한 연결 상태를 생성하거나 유지하고, 종료되었을 때 끊어 주는 역할을 담당한다.

**6. 표현 계층**
**표현 계층**은 마치 번역가와 같은 역할을 하는 계층이다. 사람이 이해할 수 있는 언어인 문자를 컴퓨터가 이해할 수 있는 코드로 변환하거나, 압축, 암호화와 같은 작업이 표현 계층에서 이루어진다.

**7. 응용 계층**
**응용 계층**은 OSI 첨조 모델 최상단에 있는 계층으로 사용자 및 사용자가 이용하는 응용 프로그램과 가장 밀접히 맞닿아 있는 계층이다. 응용 계층은 사용자가 이용할 응용 프로그램에 다양한 네트워크 서비스를 제공한다.

#### TCP/IP 모델

OSI 모델은 주로 네트워크를 이론적으로 기술하고 이해할 때 사용하는 반면에 **TCP/IP 모델**은 이론보다는 구현에 중점을 둔 네트워크 참조 모델이다. TCP/IP 모델은 최하위 계층에서 최상위 계층순으로 각각 네트워크 액세스 계층, 인터넷 계층, 전송 계층, 응용 계층으로 이루어진다.

**1. 네트워크 액세스 계층**

**네트워크 액세스 계층**은 **링크 계층** 또는 **네트워크 인터페이스 계층**이라고도 부른다. 이 계층은 OSI 모델의 데이터 링크 계층과 유사하다. TCP/IP 모델에는 OSI 모델에서의 물리 계층에 해당하는 개념이 없어 TCP/IP 모델에 물리 계층을 추가해 5계층으로 확장하여 기술하기도 한다.

**2. 인터넷 계층**

**인터넷 계층**은 OSI 모델에서의 네트워크 계층과 유사하다.

**3. 전송 계층**

**전송 계층**은 OSI 모델에서의 전송 계층과 유사하다.

**4. 응용 계층**

**응용 계층**은 OSI 모델의 세션 계층, 표현 계층, 응용 계층을 합친 것과 유사하다.

### 캡슐화와 역캡슐화

패킷은 송신 과정에서 **캡슐화**가 이루어지고, 수신 과정에서 **역캡슐화**가 이루어진다.

#### 캡슐화

어떤 정보를 송신할 때 각 계층에서는 상위 계층으로부터 내려받은 패킷을 페이로드로 삼아, 프로토콜에 걸맞은 헤더(혹은 트레일러)를 덧붙인 후 하위 계층으로 전달한다. 상위 계층의 패킷은 하위 계층에서의 페이로드로 간주된다. 즉, 한 단계 아래 계층은 바로 위의 계층으로부터 받은 패킷에 헤더 및 트레일러를 추가해 나간다. 이렇게 송신 과정에서 헤더 및 트레일러를 추가해 나가는 과정을 **캡슐화**라고 부른다. 혹은 영문 그대로 **인캡슐레이션**이라고도 부른다

#### 역캡슐화

네트워크에서 어떤 메시지를 수신할 때는 캡슐화 과정에서 붙였던 헤더를 각 계층에서 확인한 뒤 제거한다. 이를 **역캡슐화**라고 한다. 영문 그대로 **디캡슐레이션**이라고도 부른다.

### PDU

각 계층에서 송수신되는 메시지의 단위를 **PDU**라고 한다. 즉, 상위 계층에서 전달받은 데이터에 현재 계층의 프로토콜 헤더(및 트레일러)를 추가하면 현재 계층의 PDU가 된다.

PDU는 주로 전송 계층 이하의 메시지를 구분하기 위해 사용한다. 전송 계층보다 높은 계층에서는 일반적으로 데이터 혹은 메시지로만 지칭하는 경우가 많다.

전송 계층의 PDU는 TCP 프로토콜이 사용되었을 경우에는 세그먼트, UDP 프로토콜이 사용되었을 경우에는 데이터그램이 된다.

참고로, '패킷'이라는 용어는 일반적으로 패킷 교환 네트워크에서 쪼개어져 전송되는 단위를 통칭하지만, 네트워크 계층에서는 송수신 단위를 지칭하기 위해 사용되기도 한다. 네트워크 계층의 PDU는 **IP 패킷**이라고 지칭한다.

> **OSI 7계층, TCP/IP 4계층은 사실 아무것도 해주지 않는다.**
>
> 네트워크 참조 모델이나 특정 계층은 네트워크를 작동시키는 주체가 아니다. 프로토콜 혹은 네트워크 장비 같은 참조 모델에 속한 대상이 바로 네트워크를 작동시키는 주체이자 '무언가를 해 주는' 대상이다. 즉, 네트워크 참조 모델과 계층은 통신이 일어나는 단계를 역할별로 구획한 큰 그림, 이른바 '모델'일 뿐이지 반드시 지켜야 할 '규칙'도, 네트워크의 작동 주체도 아니다.

### 트래픽과 네트워크 성능 지표

**트래픽**이란 네트워크 내의 정보량을 의미한다. 특정 노드에 트래픽이 몰린다는 것은 해당 노드가 특정 시간 동안 처리해야 할 정보가 많음을 의미한다. 이 경우 해당 노드에 **과부하**가 생길 수 있다.

네트워크의 성능을 평가할 수 있는 세 가지 대중적인 지표가 있다.

#### 처리율

**처리율**은 단위 시간당 네트워크를 통해 실제로 전송되는 정보량을 의미한다. 일반적으로 bps, Mbps, Gbps 단위로 표현한다. 처리율은 비교적 실시간성이 강조된 지표로, 특정 노드가 얼마만큼의 트래픽을 처리하는 중인지 판단하기 위해 사용되는 경우가 많다.

#### 대역폭

**대역폭**이라는 용어는 신호 처리 영역에서의 정의와 네트워크 성능 측정 영역에서의 정의가 다소 다르다. 전자는 주파수 범위를 의미하지만, 후자는 **단위 시간 동안 통신 매체를 통해 송수신할 수 있는 최대 정보량**을 의미한다. 처리율과 같이 bps, Mbps, Gbps를 단위로 사용한다.

#### 패킷 손실

**패킷 손실**은 말 그대로 송수신되는 패킷이 손실된 상황을 의미한다. 높은 트래픽으로 인해 노드가 순간적으로 처리해야 할 패킷이 너무 많아지거나 네트워크상에 예기치 못한 장애가 발생해서 패킷을 처리하지 못하면 패킷 손실이 발생할 수 있다. 패킷 손실은 전체 패킷 중 유실된 패킷을 백분위로 표현한 값을 사용하는 경우가 많다.
